(()=>{"use strict";function t(){const t=["red","orange","yellow","green","blue","indigo","violet","black","pink","gray","brown"];return t[Math.floor(Math.random()*t.length)]}function i(t,i){let[o,s]=t.getCenter(),[e,h]=i.getCenter(),[n,l]=t.getVelocity(),[a,r]=i.getVelocity(),c=t.mass,d=i.mass,p=e-o,y=h-s,u=Math.sqrt(p*p+y*y),w=Math.atan2(y,p),x=n*Math.cos(w)+l*Math.sin(w),v=l*Math.cos(w)-n*Math.sin(w),M=a*Math.cos(w)+r*Math.sin(w),g=(x*(c-d)+2*d*M)/(c+d),b=(M*(d-c)+2*c*x)/(c+d),m=v,f=r*Math.cos(w)-a*Math.sin(w),C=g*Math.cos(-w)+m*Math.sin(-w),V=m*Math.cos(-w)-g*Math.sin(-w),k=b*Math.cos(-w)+f*Math.sin(-w),E=f*Math.cos(-w)-b*Math.sin(-w);t.updateVelocity(C,V),i.updateVelocity(k,E);let q=t.width+i.width-u,P=q/2*Math.cos(w),F=q/2*Math.sin(w);return t.updatePosition(o-P,s-F),i.updatePosition(e+P,h+F),[C,V,k,E]}function o(t,i,o,s){let e=o-t,h=s-i;return Math.sqrt(Math.pow(e,2)+Math.pow(h,2))}function s(t,i){const o=t.position.x-i.position.x,s=t.position.y-i.position.y;return Math.sqrt(o*o+s*s)<=t.width/2+i.width/2}const e=window.innerWidth,h=window.innerHeight;class n{constructor({position:t,dimension:i,color:o}){this.position=t,this.velocity={vx:5*(Math.random()-.5),vy:5*(Math.random()-.5)},this.height=i.y,this.width=i.x,this.color=o||"white",this.mass=this.width**3*1e-4,this.draw()}draw(){this.ball=document.createElement("div"),this.ball.style.width=this.width+"px",this.ball.style.height=this.height+"px",this.ball.style.position="absolute",this.ball.style.top=this.position.y+"px",this.ball.style.left=this.position.x+"px",this.ball.style.backgroundColor=`${this.color}`,this.ball.style.borderRadius="50%",this.event(),document.body.appendChild(this.ball)}update(){this.position.x+this.width>e?(this.velocity.vx*=-1,this.position.x=e-this.width-5):this.position.x<0?(this.velocity.vx*=-1,this.position.x=0):this.position.x+=this.velocity.vx,this.position.y+this.height>h?(this.velocity.vy*=-1,this.position.y=h-this.height):this.position.y<0?(this.velocity.vy*=-1,this.position.y=0):this.position.y+=this.velocity.vy,this.ball.style.left=this.position.x+"px",this.ball.style.top=this.position.y+"px"}updatePosition(t,i){this.position.x=t,this.position.y=i,this.ball.style.left=this.position.x+"px",this.ball.style.top=this.position.y+"px"}updateVelocity(t,i){this.velocity.vx=t,this.velocity.vy=i}getElement(){return this.ball}getCenter(){return[this.position.x+this.width/2,this.position.y+this.height/2]}getVelocity(){return[this.velocity.vx,this.velocity.vy]}event(){this.ball.addEventListener("click",(()=>{console.log(this.velocity.vx,this.velocity.vy)}))}}const l=window.innerWidth,a=window.innerHeight,r=document.getElementsByClassName("game")[0];r.style.border="3px solid red",r.style.backgroundColor="white";const c=[];function d(i){return{position:{x:Math.max(Math.random()*(l-i-20),i),y:Math.max(Math.random()*(a-i-20),i)},dimension:{x:i,y:i},color:t()}}for(let t=0;t<500;t++){let t,i=20,o=0;do{t=d(i),o++}while(c.some((i=>s(i,t)))&&o<100);o<100?c.push(new n(t)):console.log("Failed to place ball without collision after 100 attempts")}for(let t of c)r.appendChild(t.getElement());!function t(){for(let t=0;t<c.length;t++){let s=c[t];s.update();for(let e=t+1;e<c.length;e++){let t=c[e],h=s.getCenter(),n=t.getCenter(),l=s.width/2+t.width/2;if(o(...h,...n)<=l+2){let[o,e,h,n]=i(s,t);s.updateVelocity(o,e),t.updateVelocity(h,n)}}}window.requestAnimationFrame(t)}()})();